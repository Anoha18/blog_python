{% extends 'main/layouts/layout.html' %}

{% block links %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
{% endblock %}

{% block title %}{{ post.title|default:'Пост' }}{% endblock %}
{% block content %}
  <div class="d-flex flex-column h-100">
    <div style="flex: 0">
      {% include 'main/components/header.html' %}
    </div>
    <div class="h-100" style="flex: 1; overflow-y: auto;">
      <div class="container pt-3">
        <div class="row">
          <div class="col-12">
            <img src="{{ post.image }}" class="img-fluid post-image rounded" alt="image">
            <h1 class="mt-3">{{ post.title }}</h1>
            <div class="post-body">
              {{ post.body|safe }}
            </div>
            <hr>
            <div class="d-flex flex-row align-items-center justify-content-between">
              <div class="account-post-card-meta d-flex flex-row">
                <div class="card-meta__item" style="margin-right: 10px;">
                  <i class="fas fa-eye"></i>
                  <span>{{ post.views_count }}</span>
                </div>
                <div class="card-meta__item">
                  <i class="fas fa-comment-alt"></i>
                  <span>{{ post.comments_count }}</span>
                </div>
              </div>
            </div>
            <hr>
            <h2>Комментарии {{ post.comments_count }}</h2>
            {% include 'main/components/comment_form.html' %}
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  {% load static %}
  <script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
  <script src="{% static 'main/js/comment.js' %}"></script>
{% endblock %}